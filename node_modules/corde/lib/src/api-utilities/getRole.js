"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true,
});
exports.getRole = void 0;

const runtime_1 = require("../common/runtime");

const errors_1 = require("../errors");

const cordeRole_1 = require("../structures/cordeRole");

function getRole(data) {
  if (!runtime_1.runtime.isBotLoggedIn()) {
    throw new errors_1.CordeClientError("Bot is not connected yet. No role can be searched");
  }

  const _role = _getRole(data);

  if (_role) {
    return convertToCordeRole(_role);
  }

  return undefined;
}

exports.getRole = getRole;

function _getRole(data) {
  if (typeof data === "string") {
    return runtime_1.runtime.bot.getRoles().find((r) => r.id === data);
  }

  return runtime_1.runtime.bot.getRoles().find((r) => r.id === data.id || r.name === data.name);
}

function convertToCordeRole(role) {
  if (role) {
    return new cordeRole_1.CordeRole(role);
  }

  return undefined;
}
